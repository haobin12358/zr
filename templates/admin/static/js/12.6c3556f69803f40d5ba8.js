webpackJsonp([12],{JVOK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("F+jZ"),i=a("zL8q"),r={name:"productMesOperate",data:function(){return{ID:this.$route.params.id?this.$route.params.id:0,formData:{},fileUploadUrl:s.b,fileList:[],params:{},rules:{}}},created:function(){0!=this.ID&&this.getData()},methods:{getWinHeight:s.d,getData:function(){var e=this;this.$http({method:"get",url:"/cleaner/get_detail/",params:{sceid:this.ID,token:this.Cookie.get("token")}}).then(function(t){200==t.status&&(e.formData=t.data.clean,t.data.clean.scmtitlepic&&e.fileList.push({name:t.data.clean.scmtitlepic,url:t.data.clean.scmtitlepic,id:t.data.clean.scmtitlepic.slice(t.data.clean.scmtitlepic.lastIndexOf("/")+1,t.data.clean.scmtitlepic.lastIndexOf("."))}))})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;t.$refs[e].validate(function(e){if(e){var a="/cleaner/add_cleanselector/",s="post";0!=t.ID&&(a="/cleaner/update_cleaner_detail/",s="post"),t.$http({method:s,url:a,data:t.formData,params:{token:t.Cookie.get("token")}}).then(function(e){200==e.status?(Object(i.Message)({message:"操作成功",type:"success"}),t.$router.push("/clean")):Object(i.Message)({message:e.message,type:"error"})})}})})},resetForm:function(e){this.$refs[e].resetFields()},handlePreview:function(e){},submitUpload:function(e){this.$refs[e].submit()},successFile:function(e){this.formData.scmtitlepic=e.data},beforeRemove:function(e){var t=this;return Object(i.MessageBox)({title:"提示",message:"确定移除 "+e.name+"？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(a,s,i){return"confirm"===a?(i(),e.response&&(t.formData.roimage=null),!0):(i(),!1)}})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"service-operate-conatiner"},[a("div",{staticClass:"help-content-operate-header"},[a("b",[e._v(e._s(0!=e.$route.params.id?"编辑":"添加"))]),e._v(" "),a("router-link",{attrs:{to:"/clean"}},[a("el-button",[e._v("返回")])],1)],1),e._v(" "),a("el-form",{ref:"formData",staticClass:"operate-dialog-form",style:{height:e.getWinHeight()-252+"px"},attrs:{model:e.formData,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"图标：",prop:"scmtitlepic",rules:[{required:!0,message:"请上传",trigger:"change"}]}},[a("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:e.fileUploadUrl,"on-preview":e.handlePreview,"on-success":e.successFile,"before-remove":e.beforeRemove,data:e.params,"file-list":e.fileList,accept:"image/jpeg,image/png,image/jpg",limit:5,"auto-upload":!1,"list-type":"picture"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击上传文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(t){e.submitUpload("upload")}}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，大小48*48")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题：",prop:"scmtitle",rules:[{required:!0,message:"请输入",trigger:"change"}]}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入标题",size:"small"},model:{value:e.formData.scmtitle,callback:function(t){e.$set(e.formData,"scmtitle",t)},expression:"formData.scmtitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介：",prop:"scmsubtitle",rules:[{required:!0,message:"请输入",trigger:"change"}]}},[a("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",placeholder:"简介",size:"small"},model:{value:e.formData.scmsubtitle,callback:function(t){e.$set(e.formData,"scmsubtitle",t)},expression:"formData.scmsubtitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格（每小时）：",prop:"scprice",rules:[{required:!0,message:"请输入",trigger:"change"}]}},[a("el-input-number",{staticStyle:{width:"200px"},attrs:{step:.01,min:0,placeholder:"请输入",size:"small"},model:{value:e.formData.scprice,callback:function(t){e.$set(e.formData,"scprice",t)},expression:"formData.scprice"}})],1),e._v(" "),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("formData")}}},[e._v("提交")]),e._v(" "),a("router-link",{attrs:{to:"/productMan/productMes"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("formData")}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(e){a("v1BD")},null,null);t.default=o.exports},v1BD:function(e,t){}});