webpackJsonp([26],{"9Tui":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n=a("bOdI"),r=a.n(n),s=a("zL8q"),i=a("F+jZ"),l={name:"productMes",data:function(){return{loading:!1,search:"",multipleSelection:[],tableData:[],currentPage:1,total:0,pageSize:10}},created:function(){this.getData()},methods:(o={getWinHeight:i.d},r()(o,"getWinHeight",i.d),r()(o,"setShowHome",function(e,t){var a=this,o={roid:t.roid,rotype:"3",rosort:2},n={roid:t.roid};e?this.$http({method:"POST",url:"/index/add_room_show/",data:o,params:{token:this.Cookie.get("token")}}).then(function(e){200==e.status?(Object(s.Message)({type:"success",message:e.message,duration:1e3}),a.getData()):Object(s.Message)({type:"error",message:e.message,duration:1e3})}):this.$http({method:"POST",url:"/index/delete_room_show_byroid/",data:n,params:{token:this.Cookie.get("token")}}).then(function(e){200==e.status?(Object(s.Message)({type:"success",message:e.message,duration:1e3}),a.getData()):Object(s.Message)({type:"error",message:e.message,duration:1e3})})}),r()(o,"handleCurrentChange",function(e){this.currentPage=e,this.search?this.searchData(e):this.getData()}),r()(o,"formatter",function(e){return e.releasetime=e.releasetime.substr(0,10),e.releasetime}),r()(o,"handleSelectionChange",function(e){this.multipleSelection=e.map(function(e){return e.ID})}),r()(o,"handleEdit",function(e){this.$router.push("/homestay/rentOperate/"+e+"?from=homestay")}),r()(o,"handleDelete",function(e){var t=this,a={roid:e};Object(s.MessageBox)({title:"提示",message:"此操作将永久删除数据, 是否继续？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(e,o,n){"confirm"===e?(o.confirmButtonLoading=!0,o.confirmButtonText="执行中...",t.$http({method:"POST",url:"/room/delete_room/",params:{token:t.Cookie.get("token")},data:a}).then(function(e){o.confirmButtonLoading=!1,200==e.status?(Object(s.Message)({type:"success",message:e.message,duration:1e3}),t.getData()):Object(s.Message)({type:"error",message:e.message,duration:1e3}),o.confirmButtonLoading=!1,n()})):n()}})}),r()(o,"getData",function(){var e=this;this.loading=!0,this.$http({method:"get",url:"/room/get_list/",params:{type:"3",page:this.currentPage,count:this.pageSize}}).then(function(t){200==t.status?t.data?(e.tableData=t.data,e.total=t.all_count):(e.tableData=null,e.total=t.all_count):(e.tableData=null,e.total=t.all_count,Object(s.Message)({type:"error",message:t.message,duration:2e3})),e.loading=!1}).catch(function(){e.loading=!1})}),r()(o,"searchData",function(){var e=this;this.loading=!0,this.$http({method:"get",url:"/MProduct/GetProductList",params:{token:this.Cookie.get("Ticket"),keyword:this.search,pageIndex:this.currentPage,pageSize:this.pageSize}}).then(function(t){t.status,e.tableData=t.data,e.total=t.all_count,e.loading=!1}).catch(function(){e.loading=!1})}),r()(o,"searchKeyword",function(){this.currentPage=1,this.handleCurrentChange(this.currentPage)}),o)},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"homestay-container"},[a("div",{staticClass:"announcement-header"},[a("div",{staticClass:"header-left"},[a("b",[e._v("管理")]),e._v(" "),a("span",[e._v("共 "+e._s(e.total)+" 条")])]),e._v(" "),a("div",{staticClass:"header-right"},[a("router-link",{attrs:{to:"/homestay/rentOperate/0?from=homestay",title:"新增"}},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"}})],1)],1)]),e._v(" "),a("div",{staticClass:"announcement-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"roimage",label:"图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.roimage?a("img",{staticClass:"product-img",attrs:{src:t.row.roimage}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rorenttype",label:"分类",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roname",label:"名称",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roarea",label:"面积",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.roarea)+"㎡")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roshowprice",label:"价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("￥"+e._s(t.row.roshowprice)+"/"+e._s("month"==t.row.roshowpriceunit?"月":"晚"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rodecorationstyle",label:"装修类型",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"face",label:"朝向",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_new",label:"是否在首页显示",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(a){return e.setShowHome(a,t.row)}},model:{value:t.row.show_index,callback:function(a){e.$set(t.row,"show_index",a)},expression:"scope.row.show_index"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"房源操作",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{staticClass:"el-icon-edit",attrs:{size:"mini",title:"编辑"},on:{click:function(a){e.handleEdit(t.row.roid)}}}),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger",title:"删除"},on:{click:function(a){e.handleDelete(t.row.roid)}}})],1)]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next, jumper, ->","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)])},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("obo+")},null,null);t.default=u.exports},"obo+":function(e,t){}});