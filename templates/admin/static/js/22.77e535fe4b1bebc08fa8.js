webpackJsonp([22],{X1nm:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("F+jZ"),r=s("zL8q"),i={name:"productMesOperate",data:function(){return{ID:this.$route.params.id?this.$route.params.id:0,formData:{smspstartprice:null,smsppricestartdeadline:null,smsppricesoverstartperkg:null,smsshowprice:0,pricedetail:{smsppricesoverstartperkg:0,smsppricestartdeadline:0,smspstartprice:0}},fileUploadUrl:a.b,fileList:[],params:{},rules:{}}},created:function(){0!=this.ID&&this.getData()},methods:{getWinHeight:a.d,getData:function(){var e=this;this.$http({method:"get",url:"/mover/get_detail/",params:{smsid:this.ID,token:this.Cookie.get("token")}}).then(function(t){200==t.status&&(e.formData=t.data.detail,t.data.detail.smstitlepic&&e.fileList.push({name:t.data.detail.smstitlepic,url:t.data.detail.smstitlepic,id:t.data.detail.smstitlepic.slice(t.data.detail.smstitlepic.lastIndexOf("/")+1,t.data.detail.smstitlepic.lastIndexOf("."))}))})},submitForm:function(e){var t=this;return this.formData.pricedetail.smspstartprice?this.formData.pricedetail.smsppricestartdeadline?this.formData.pricedetail.smsppricesoverstartperkg?void this.$refs[e].validate(function(s){if(!s)return!1;t.$refs[e].validate(function(e){if(e){var s="/mover/add_moverselector/",a="post";0!=t.ID&&(s="/mover/update_mover_selector/",a="post"),t.$http({method:a,url:s,data:t.formData,params:{token:t.Cookie.get("token")}}).then(function(e){200==e.status?(Object(r.Message)({message:"操作成功",type:"success"}),t.$router.push("/moveHouse")):Object(r.Message)({message:e.message,type:"error"})})}})}):(Object(r.Message)({message:"填写超出范围后的公里单价",type:"warning"}),!1):(Object(r.Message)({message:"填写起步价里程",type:"warning"}),!1):(Object(r.Message)({message:"填写起步价",type:"warning"}),!1)},resetForm:function(e){this.$refs[e].resetFields()},handlePreview:function(e){},submitUpload:function(e){this.$refs[e].submit()},successFile:function(e){this.formData.smstitlepic=e.data},beforeRemove:function(e){var t=this;return Object(r.MessageBox)({title:"提示",message:"确定移除 "+e.name+"？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(s,a,r){return"confirm"===s?(r(),e.response&&(t.formData.smstitlepic=null),!0):(r(),!1)}})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"service-operate-conatiner"},[s("div",{staticClass:"help-content-operate-header"},[s("b",[e._v(e._s(0!=e.$route.params.id?"编辑":"添加"))]),e._v(" "),s("router-link",{attrs:{to:"/moveHouse"}},[s("el-button",[e._v("返回")])],1)],1),e._v(" "),s("el-form",{ref:"formData",staticClass:"operate-dialog-form",style:{height:e.getWinHeight()-252+"px"},attrs:{model:e.formData,"label-width":"240px"}},[s("el-form-item",{attrs:{label:"图标：",prop:"smstitlepic",rules:[{required:!0,message:"请上传",trigger:"change"}]}},[s("el-upload",{ref:"upload",staticClass:"upload",attrs:{action:e.fileUploadUrl,"on-preview":e.handlePreview,"on-success":e.successFile,"before-remove":e.beforeRemove,data:e.params,"file-list":e.fileList,accept:"image/jpeg,image/png,image/jpg",limit:5,"auto-upload":!1,"list-type":"picture"}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("点击上传文件")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:function(t){e.submitUpload("upload")}}},[e._v("上传到服务器")]),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，大小48*48")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"标题：",prop:"smstitle",rules:[{required:!0,message:"请输入",trigger:"change"}]}},[s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入标题",size:"small"},model:{value:e.formData.smstitle,callback:function(t){e.$set(e.formData,"smstitle",t)},expression:"formData.smstitle"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"简介：",prop:"smssubtitle",rules:[{required:!0,message:"请输入",trigger:"change"}]}},[s("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",placeholder:"简介",size:"small"},model:{value:e.formData.smssubtitle,callback:function(t){e.$set(e.formData,"smssubtitle",t)},expression:"formData.smssubtitle"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"起步价格："}},[s("el-input-number",{staticStyle:{width:"200px"},attrs:{step:.01,min:0,placeholder:"请输入",size:"small"},model:{value:e.formData.pricedetail.smspstartprice,callback:function(t){e.$set(e.formData.pricedetail,"smspstartprice",t)},expression:"formData.pricedetail.smspstartprice"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"起步价里程（公里）："}},[s("el-input-number",{staticStyle:{width:"200px"},attrs:{step:.01,min:0,placeholder:"请输入",size:"small"},model:{value:e.formData.pricedetail.smsppricestartdeadline,callback:function(t){e.$set(e.formData.pricedetail,"smsppricestartdeadline",t)},expression:"formData.pricedetail.smsppricestartdeadline"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"超出范围后的公里单价："}},[s("el-input-number",{staticStyle:{width:"200px"},attrs:{step:.01,min:0,placeholder:"请输入",size:"small"},model:{value:e.formData.pricedetail.smsppricesoverstartperkg,callback:function(t){e.$set(e.formData.pricedetail,"smsppricesoverstartperkg",t)},expression:"formData.pricedetail.smsppricesoverstartperkg"}})],1),e._v(" "),s("el-row",[s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("formData")}}},[e._v("提交")]),e._v(" "),s("router-link",{attrs:{to:"/productMan/productMes"}},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm("formData")}}},[e._v("返回")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(i,l,!1,function(e){s("nnuH")},null,null);t.default=o.exports},nnuH:function(e,t){}});