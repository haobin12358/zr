webpackJsonp([31],{Qbsx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=a("bOdI"),o=a.n(s),l=a("zL8q"),i=a("F+jZ"),r={name:"productMes",data:function(){return{status:"",enumOptions:[],loading:!1,search:"",multipleSelection:[],tableData:[],currentPage:1,total:0,pageSize:10}},created:function(){this.getData()},methods:(n={getWinHeight:i.d},o()(n,"getWinHeight",i.d),o()(n,"selectStatus",function(){this.currentPage=1,this.handleCurrentChange(this.currentPage)}),o()(n,"setShowHome",function(t,e){this.$http({method:"POST",url:"/trade/update_complaint/",data:{usercomplaintid:e,status:1},params:{token:this.Cookie.get("token")}}).then(function(t){200==t.status?Object(l.Message)({type:"success",message:t.message,duration:1e3}):Object(l.Message)({type:"error",message:t.message,duration:1e3})})}),o()(n,"handleCurrentChange",function(t){this.currentPage=t,""!==this.status?this.searchData(t):this.getData()}),o()(n,"formatter",function(t){return t.releasetime=t.releasetime.substr(0,10),t.releasetime}),o()(n,"handleSelectionChange",function(t){this.multipleSelection=t.map(function(t){return t.ID})}),o()(n,"handleEdit",function(t){this.$router.push("/complain/complainOperate/"+t)}),o()(n,"handleDelete",function(t){var e=this,a={usercomplaintid:t};Object(l.MessageBox)({title:"提示",message:"此操作将永久删除数据, 是否继续？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(t,n,s){"confirm"===t?(n.confirmButtonLoading=!0,n.confirmButtonText="执行中...",e.$http({method:"POST",url:"/trade/delete_complaint/",data:a,params:{token:e.Cookie.get("token")}}).then(function(t){n.confirmButtonLoading=!1,200==t.status?(Object(l.Message)({type:"success",message:t.message,duration:1e3}),e.getData()):Object(l.Message)({type:"error",message:t.message,duration:1e3}),n.confirmButtonLoading=!1,s()})):s()}})}),o()(n,"getData",function(){var t=this;this.loading=!0,this.$http({method:"get",url:"/trade/get_complaint_list/",params:{token:this.Cookie.get("token"),page:this.currentPage,count:this.pageSize}}).then(function(e){200==e.status?e.data?(t.tableData=e.data,t.total=e.all_count):(t.tableData=null,t.total=e.all_count):(t.tableData=null,t.total=e.all_count,Object(l.Message)({type:"error",message:e.message,duration:2e3})),t.loading=!1}).catch(function(){t.loading=!1})}),o()(n,"searchData",function(t){var e=this;this.loading=!0,this.$http({method:"get",url:"/trade/get_complaint_list/",params:{status:this.status,token:this.Cookie.get("token"),page:t,count:this.pageSize}}).then(function(t){t.status,e.tableData=t.data,e.total=t.all_count,e.loading=!1}).catch(function(){e.loading=!1})}),o()(n,"searchKeyword",function(){this.currentPage=1,this.handleCurrentChange(this.currentPage)}),n)},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"complain-container"},[a("div",{staticClass:"announcement-header"},[a("div",{staticClass:"header-left"},[a("b",[t._v("管理")]),t._v(" "),a("span",[t._v("共 "+t._s(t.total)+" 条")])]),t._v(" "),a("div",{staticClass:"header-right"},[t._v("\n            状态：\n            "),a("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:t.selectStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("el-option",{attrs:{label:"未处理",value:0}}),t._v(" "),a("el-option",{attrs:{label:"已处理",value:1}})],1)],1)]),t._v(" "),a("div",{staticClass:"announcement-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"usercomplaintphone",label:"投诉人号码",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"usercomplaintaddress",label:"投诉物业地址",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"usercomplainttext",label:"投诉内容",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"usercomplaintstatus",label:"处理状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["未处理"==e.row.usercomplaintstatus?a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.row.usercomplaintstatus))]):a("span",{staticStyle:{color:"green"}},[t._v(t._s(e.row.usercomplaintstatus))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"is_new",label:"是否已处理",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{disabled:"已处理"==e.row.usercomplaintstatus,"active-value":"已处理","inactive-value":"未处理"},on:{change:function(a){return t.setShowHome(a,e.row.usercomplaintid)}},model:{value:e.row.usercomplaintstatus,callback:function(a){t.$set(e.row,"usercomplaintstatus",a)},expression:"scope.row.usercomplaintstatus"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"操作",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{staticClass:"el-icon-delete",attrs:{size:"mini",type:"danger",title:"删除"},on:{click:function(a){t.handleDelete(e.row.usercomplaintid)}}})],1)]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next, jumper, ->","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)])},staticRenderFns:[]};var u=a("VU/8")(r,c,!1,function(t){a("nXVL")},null,null);e.default=u.exports},nXVL:function(t,e){}});